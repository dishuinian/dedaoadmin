{"remainingRequest":"F:\\projects\\dedaoadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\projects\\dedaoadmin\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\projects\\dedaoadmin\\src\\views\\login.vue","mtime":1643780432782},{"path":"F:\\projects\\dedaoadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642213752375},{"path":"F:\\projects\\dedaoadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":1642213756324},{"path":"F:\\projects\\dedaoadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642213752375},{"path":"F:\\projects\\dedaoadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":1642213757361}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxvZ2luIH0gZnJvbSAiLi4vYXBpL2h0dHAiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICBjb25zdCBjaGVja3VzZXJuYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnlKjmiLflkI0iKSk7CiAgICAgIH0KICAgICAgY2FsbGJhY2soKTsKICAgIH07CiAgICBjb25zdCBjaGVja3Bhc3N3b3JkID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXlr4bnoIEiKSk7CiAgICAgIH0KICAgICAgaWYgKCEvXlxkezMsNX0kL2kudGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpTMtNeS9jeWtl+espuS4suWvhueggSIpKTsKICAgICAgfQogICAgICBjYWxsYmFjaygpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGxvZ2luRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmraTpobnlv4XloasiLAogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrdXNlcm5hbWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7IG1pbjogMiwgbWF4OiAiNSIsIG1lc3NhZ2U6ICLlv4XpobvmmK8yLTXkuKrlrZfnrKYiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IGNoZWNrcGFzc3dvcmQsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8gYWxlcnQoJ3N1Ym1pdCEnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubG9naW5Gb3JtKTsKICAgICAgICAgIGxvZ2luKHRoaXMubG9naW5Gb3JtKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICBsZXQgeyBjb2RlICx0b2tlbn0gPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgIC8vIOeZu+mZhuaIkOWKnwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLHRva2VuKQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLnmbvpmYbmiJDlip8iLAogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIC8vIOeZu+mZhuWksei0pQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLnmbvpmYblpLHotKUiLAogICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMubG9naW5Gb3JtID0gewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnIiKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login\">\n    <el-form\n      :model=\"loginForm\"\n      status-icon\n      :rules=\"rules\"\n      ref=\"loginForm\"\n      label-width=\"100px\"\n      class=\"demo-loginForm\"\n    >\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input\n          type=\"text\"\n          v-model=\"loginForm.username\"\n          autocomplete=\"off\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"password\">\n        <el-input\n          type=\"password\"\n          v-model=\"loginForm.password\"\n          autocomplete=\"off\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('loginForm')\"\n          >提交</el-button\n        >\n        <el-button @click=\"resetForm('loginForm')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { login } from \"../api/http\";\n\nexport default {\n  data() {\n    const checkusername = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      }\n      callback();\n    };\n    const checkpassword = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      }\n      if (!/^\\d{3,5}$/i.test(value)) {\n        callback(new Error(\"请输入3-5位字符串密码\"));\n      }\n      callback();\n    };\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\",\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            message: \"此项必填\",\n            validator: checkusername,\n            trigger: \"blur\",\n          },\n          { min: 2, max: \"5\", message: \"必须是2-5个字符\", trigger: \"blur\" },\n        ],\n        password: [{ validator: checkpassword, trigger: \"blur\" }],\n      },\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          // alert('submit!');\n          console.log(this.loginForm);\n          login(this.loginForm)\n            .then((res) => {\n              console.log(res);\n              let { code ,token} = res.data;\n\n              if (code === 0) {\n                // 登陆成功\n                sessionStorage.setItem(\"token\",token)\n                this.$message({\n                  message: \"登陆成功\",\n                  type: \"success\",\n                  duration: 800,\n                });\n                this.$router.push('/')\n              }\n              if (code === 1) {\n                // 登陆失败\n                this.$message({\n                  message: \"登陆失败\",\n                  type: \"warning\",\n                  duration: 800,\n                });\n                this.loginForm = {\n                  username: \"\",\n                  password: \"\",\n                };\n              }\n            })\n            .catch((err) => {\n              console.log(\"err\");\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n"]}]}