{"remainingRequest":"F:\\projects\\dedaoadmin\\node_modules\\babel-loader\\lib\\index.js!F:\\projects\\dedaoadmin\\src\\api\\config.js","dependencies":[{"path":"F:\\projects\\dedaoadmin\\src\\api\\config.js","mtime":1643300396296},{"path":"F:\\projects\\dedaoadmin\\babel.config.js","mtime":1642213773922},{"path":"F:\\projects\\dedaoadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642213752375},{"path":"F:\\projects\\dedaoadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":1642213756324}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBpbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsCiAgdGltZW91dDogNTAwMAp9KTsgLy/mt7vliqDor7fmsYLmi6bmiKrlmajvvIzkvJrlnKjlj5Hotbfor7fmsYLkuYvliY3miafooYznm7jlupTnmoTpnIDmsYIKCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvL+a3u+WKoOWTjeW6lOaLpuaIquWZqO+8jOS8muWcqOi/lOWbnuaVsOaNruWQjuWFiOaJp+ihjOebuOW6lOeahOmcgOaxggoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyBjb25zb2xlLmxvZygncmVzJyxyZXNwb25zZSk7CiAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gNDAxKSB7CiAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBjb25zb2xlLmxvZygncmVzLWVycicscmVzcG9uc2UpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTs="},{"version":3,"sources":["F:/projects/dedaoadmin/src/api/config.js"],"names":["axios","instance","create","baseURL","timeout","interceptors","request","use","config","token","sessionStorage","getItem","headers","common","error","Promise","reject","response","data","code","clear","window","location","reload"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAN,CAAa;AAC1BC,EAAAA,OAAO,EAAC,uBADkB;AAE1BC,EAAAA,OAAO,EAAE;AAFiB,CAAb,CAAjB,C,CAKA;;AACAH,QAAQ,CAACI,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAUC,MAAV,EAAkB;AAChD,MAAIC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAZ;;AACA,MAAIF,KAAJ,EAAU;AACND,IAAAA,MAAM,CAACI,OAAP,CAAeC,MAAf,CAAsB,eAAtB,IAAyC,YAAYJ,KAArD;AACH;;AACD,SAAOD,MAAP;AACD,CANH,EAMK,UAAUM,KAAV,EAAiB;AAClB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CATH,E,CAWA;;AACAb,QAAQ,CAACI,YAAT,CAAsBY,QAAtB,CAA+BV,GAA/B,CAAmC,UAAUU,QAAV,EAAoB;AACnD;AACA,MAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,GAA3B,EAA+B;AAC7BT,IAAAA,cAAc,CAACU,KAAf;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;;AACD,SAAON,QAAP;AACD,CAPH,EAOK,UAAUH,KAAV,EAAiB;AAClB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVH;AAWA,eAAeb,QAAf","sourcesContent":["import axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n    baseURL:'http://localhost:3000',\r\n    timeout: 5000\r\n}); \r\n\r\n//添加请求拦截器，会在发起请求之前执行相应的需求\r\ninstance.interceptors.request.use(function (config) {\r\n    let token = sessionStorage.getItem(\"token\")\r\n    if (token){\r\n        config.headers.common['Authorization'] = 'Bearer ' + token;\r\n    }\r\n    return config;\r\n  }, function (error) {\r\n    // Do something with request error\r\n    return Promise.reject(error);\r\n  });\r\n\r\n//添加响应拦截器，会在返回数据后先执行相应的需求\r\ninstance.interceptors.response.use(function (response) {\r\n    // console.log('res',response);\r\n    if (response.data.code === 401){\r\n      sessionStorage.clear()\r\n      window.location.reload()\r\n    }\r\n    return response;\r\n  }, function (error) {\r\n    // console.log('res-err',response);\r\n    return Promise.reject(error);\r\n  });\r\nexport default instance"]}]}